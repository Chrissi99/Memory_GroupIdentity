{{ block title }}
{{ endblock }}

{{ block content }}


<!-- <h2> Task </h2> -->

<h3> Background </h3>

<p id="text">
    In a previous study, participants who were supporters of either the
    {{ if belief_ref == "ingroup" }}
    {{participant.group}}s
    {{ else }}
    {{participant.outgroup}}s
    {{ endif }}
    or the
    {{ if belief_ref == "ingroup" }}
    {{participant.outgroup}}s
    {{ else }}
    {{participant.group}}s
    {{ endif }}
    completed the same {{C.NUM_TASKS_W}} tasks that you have just completed:
    {{ if participant.task1 == "logic" }} Logic Task
    {{ elif participant.task1 == "luck" }} Luck Task
    {{ endif }} and
    {{ if participant.task2 == "logic" }} Logic Task.
    {{ elif participant.task2 == "luck" }} Luck Task.
    {{ endif }}
</p>
<p>
    For each task, a team of {{ C.NUM_MEMBERS_W}}
    {{ if belief_ref == "ingroup" }}
    {{participant.group}}s
    {{ else }}
    {{participant.outgroup}}s
    {{ endif }}
    competed against a team of {{ C.NUM_MEMBERS_W}}
    {{ if belief_ref == "ingroup" }}
    {{participant.outgroup}}s.
    {{ else }}
    {{participant.group}}s.
    {{ endif }}
    Teams were randomly selected and could consist of different people for each task.
</p>

<table style="item-align:center;">
    <th width="5%"> </th>
    <th width="18%" style="text-align:left"> Task </th>
    <th width="8%" style="item-align:center">
        {{ if belief_ref == "ingroup" }}
            {{ if participant.group == "Democrat" }}
            <img class="logo" src="{% static "global/logo_democrat.png" %}" alt="logo of Democrats">
            {{ else}}
            <img class="logo" src="{% static "global/logo_republican.png" %}" alt="logo of Republicans">
            {{ endif }}
        {{ else }}
            {{ if participant.outgroup == "Democrat" }}
            <img class="logo" src="{% static "global/logo_democrat.png" %}" alt="logo of Democrats">
            {{ else}}
            <img class="logo" src="{% static "global/logo_republican.png" %}" alt="logo of Republicans">
            {{ endif }}
        {{ endif }}
    </th>
    <th width="18%" style="text-align:left">
        {{ if belief_ref == "ingroup" }}
            {{ participant.group}}s <br>
        {{ else }}
            {{ participant.outgroup}}s <br>
        {{ endif }}
    </th>
    <th width="4%"> </th>
    <th width="5%"> </th>
    <th width="8%" style="item-align:left">
        {{ if belief_ref == "ingroup" }}
            {{ if participant.outgroup == "Democrat" }}
            <img class="logo" src="{% static "global/logo_democrat.png" %}" alt="logo of Democrats">
            {{ else}}
            <img class="logo" src="{% static "global/logo_republican.png" %}" alt="logo of Republicans">
            {{ endif }}
        {{ else }}
            {{ if participant.group == "Democrat" }}
            <img class="logo" src="{% static "global/logo_democrat.png" %}" alt="logo of Democrats">
            {{ else}}
            <img class="logo" src="{% static "global/logo_republican.png" %}" alt="logo of Republicans">
            {{ endif }}
        {{ endif }}
    </th>
    <th width="18%" style="text-align:left">
        {{ if belief_ref == "ingroup" }}
            {{ participant.outgroup}}s <br>
        {{ else }}
            {{ participant.group}}s <br>
        {{ endif }}
    </th>
    <tr height="5px" style="border-bottom: 3px solid black"></tr>
    <tr height="2px"></tr>
    <tr>
        <td>
            {{ if participant.task1 == "logic" }} <img class="task_icon" src="{% static "global/logic_task_icon.png" %}" alt="icon logic">
            {{ elif participant.task1 == "luck" }} <img class="task_icon" src="{% static "global/dice3.png" %}" alt="icon luck">
            {{ endif }}
        </td>
        <td class="task_col"> {{ if participant.task1 == "logic" }} Logic Task
            {{ elif participant.task1 == "luck" }} Luck Task
            {{ endif }}
        </td>
        <td colspan="2" style="text-align:center">
            {{ if belief_ref == "ingroup" }}
                {{ if participant.group == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ else }}
                {{ if participant.outgroup == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ endif }}
        </td>
        <td style="text-align:center"> <b>vs.</b> </td>
        <td> </td>
        <td colspan="2" style="text-align:center">
            {{ if belief_ref == "ingroup" }}
                {{ if participant.outgroup == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ else }}
                {{ if participant.group == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ endif }}
        </td>
    </tr>
    <tr height="3px" style="border-bottom:1px solid black"></tr>
    <tr height="3px"> </tr>
    <tr>
        <td>
            {{ if participant.task2 == "logic" }} <img class="task_icon" src="{% static "global/logic_task_icon.png" %}" alt="icon logic">
            {{ elif participant.task2 == "luck" }} <img class="task_icon" src="{% static "global/dice3.png" %}" alt="icon luck">
            {{ endif }}
        </td>
        <td> {{ if participant.task2 == "logic" }} Logic Task
            {{ elif participant.task2 == "luck" }} Luck Task
            {{ endif }}
        </td>
        <td colspan="2" style="text-align:center">
            {{ if belief_ref == "ingroup" }}
                {{ if participant.group == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ else }}
                {{ if participant.outgroup == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ endif }}
        </td>
        <td style="text-align:center"> <b>vs.</b> </td>
        <td> </td>
        <td colspan="2" style="text-align:center">
            {{ if belief_ref == "ingroup" }}
                {{ if participant.outgroup == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ else }}
                {{ if participant.group == "Democrat" }}
                <img class="group_img" src="{% static "global/group_democrat.png" %}" alt="logo of Democrats">
                {{ else}}
                <img class="group_img" src="{% static "global/group_republican.png" %}" alt="logo of Republicans">
                {{ endif }}
            {{ endif }}
        </td>
    </tr>
    <!-- <tr height="3px" style="border-bottom:1px solid black"></tr>
    <tr height="3px"> </tr> -->
</table>
<br>
The Competition:
<ul>
    <li>
        Each team member completed their assigned task individually.
    </li>
    <li>
        Each team's total score was the sum of the individual scores of its {{ C.NUM_MEMBERS_W}} members.
    </li>
    <li>
        The team with the higher total score won the competition for that task. In case of a tie in the total scores, a coin flip was used to determine which team won the competition.
    </li>
    <li>
        Members of the winning team for each task received a bonus payment.
    </li>
</ul>

<p>
    Click <span id="instructions_trigger" style="color:blue"><u>here</u></span> if you want an example.
</p>
</div>
<div id="logicmodal" class="modal">
    <span id="logicclose" class="close">&times;</span>
    <div id="logiccaption">
<h4> Examples: </h4>
<p>
    In the Logic Task, the sum of solved questions from all {{ C.NUM_MEMBERS_W}} {{ingroup_ref}}s was compared to the sum of
    solved questions from all {{ C.NUM_MEMBERS_W}} {{outgroup_ref}}s.
</p>
<ul>
    <li>
        Example 1: The {{ingroup_ref}}s solved a total of 25 questions and the {{outgroup_ref}}s solved 23 questions: Team {{ingroup_ref}} won.
    </li>
    <li>
        Example 2: The {{ingroup_ref}}s solved a total of 16 questions and the {{outgroup_ref}}s solved 16 questions: A coin flip determined the winner.
    </li>
    <li>
        Example 3: The {{ingroup_ref}}s solved a total of 18 questions and the {{outgroup_ref}}s solved 22 questions: Team {{outgroup_ref}} won.
    </li>
</ul>


        <br>
</div>
</div>

{{ next_button }}


<input type="hidden" name="pagetime_background" id="pagetime_background" value="0">
{{ formfield_errors 'pagetime_background' }}
<input type="hidden" name="focus_data_background" id="id_focus_data" />
<input type="hidden" name="background_click_example" id="background_click_example" value="0">
<input type="hidden" name="background_time_example" id="background_time_example" value="0">
{{ formfield_errors 'background_click_example' }}
{{ formfield_errors 'background_time_example' }}

{{ endblock }}



{{ block styles}}
<style>
.no-space {
        letter-spacing: -0.01em; /* Adjust the value as needed */
    }
table{
    font-size: 20px;
    width: 70%;
    margin: auto;
    border-collapse: collapse;
    border: none;
}
table th{
    font-size: 24px;
}

table td{
    text-align: left;
}
.hidden {
	display:none;
}

.infobox {
    // background-color:#f0f0f5
    }

.openbox {
        cursor: pointer;
		margin: 15px 0;
		  }


.button_normal{
    background-color: #0B60DB;
    border: none;
    border-radius: 7px;
    color: white;
    padding: 7px 14px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

.belief_task {
    }

.button {
    border-radius: 7px;
    padding: 7px 14px;
}

.logo {
    width:90%;
    height: auto;
   }

.group_img {
    width:50%;
    height: auto;
   }
.task_icon {
    width:95%;
    height: auto;
    align-items: left;
   }
.openbox {
        cursor: pointer;
		margin: 15px 0;
		  }
.modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }
#instructions_trigger:hover{
    cursor: pointer;
    }

#dict_trigger:hover{
    cursor: pointer;
    }

#re_trigger:hover{
    cursor: pointer;
    }

.modal-content {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
    }

#logiccaption {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
    color: #ccc;
    padding: 10px 0;
    height: 150px;
    }

.modal-content, #caption {
    animation-name: zoom;
    animation-duration: 0.6s;
    }

@keyframes zoom {
    from {transform:scale(0)}
    to {transform:scale(1)}
    }

.close {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    }

.close:hover,
.close:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
    }

@media only screen and (max-width: 700px){
.modal-content {
    width: 100%;
    }
}
</style>
{{ endblock }}

{{ block scripts }}
<script>
// Get the modal
var logicmodal = document.getElementById("logicmodal");

// Get the image and insert it inside the modal - use its "alt" text as a caption
var logictrigger = document.getElementById("instructions_trigger");
var logicmodalImg = document.getElementById("logicimg");
var logiccaptionText = document.getElementById("logiccaption");
logictrigger.onclick = function(){
    logicmodal.style.display = "block";
    logiccaptionText.innerHTML = logicmodalImg.alt;
};

// Get the <span> element that closes the modal
var logicspan = document.getElementById("logicclose");

// When the user clicks on <span> (x), close the modal
    logicspan.onclick = function() {
        logicmodal.style.display = "none";
};
</script>
<script>
    document.getElementById("openbox").addEventListener("click", function(){
    document.getElementById("infobox").classList.remove("hidden");
    document.getElementById("container").classList.add("hidden");
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text');
    const wordsToHighlight = ['Green'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_green">${word}</span>`);
    });
});
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text');
    const wordsToHighlight = ['Orange'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_orange">${word}</span>`);
    });
});
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text');
    const wordsToHighlight = ['Blue'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_blue">${word}</span>`);
    });
});
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text');
    const wordsToHighlight = ['Purple'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_purple">${word}</span>`);
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text2');
    const wordsToHighlight = ['Green'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_green">${word}</span>`);
    });
});
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text2');
    const wordsToHighlight = ['Orange'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_orange">${word}</span>`);
    });
});
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text2');
    const wordsToHighlight = ['Blue'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_blue">${word}</span>`);
    });
});
    document.addEventListener('DOMContentLoaded', function() {
    const textElement = document.getElementById('text2');
    const wordsToHighlight = ['Purple'];

    wordsToHighlight.forEach(word => {
        const regex = new RegExp(`\\b${word}\\b`, 'gi');
        textElement.innerHTML = textElement.innerHTML.replace(regex, `<span class="highlight_purple">${word}</span>`);
    });
});
</script>
<script>
let events = [];

// Beispiel-Logik: push/close Events; ersetze durch deine bestehende Logik
let blurStart = null;
window.addEventListener('blur', () => { blurStart = Date.now(); });
window.addEventListener('focus', () => {
    if (blurStart) {
        events.push({ unfocused_duration_ms: Date.now() - blurStart, ts: blurStart });
        blurStart = null;
    }
});

// Schreib das JSON regelmäßig ins hidden field und beim Verlassen
function updateHidden() {
    document.getElementById('id_focus_data').value = JSON.stringify(events);
}
setInterval(updateHidden, 1000);
window.addEventListener('beforeunload', updateHidden);
document.addEventListener('visibilitychange', updateHidden);
</script>
<script>
let pageEnterTime = Date.now();

document.querySelector("form").addEventListener("submit", function() {
    let duration = (Date.now() - pageEnterTime) / 1000.0;  // seconds
    document.getElementById("pagetime_background").value = duration.toFixed(2);
});
</script>
<script>
let modalOpenTime = null;
let totalTime = 0;
let clickCount = 0;

var logicmodal = document.getElementById("logicmodal");
var logictrigger = document.getElementById("instructions_trigger");
var logicspan = document.getElementById("logicclose");

// Open modal
logictrigger.onclick = function(){
    logicmodal.style.display = "block";
    modalOpenTime = Date.now();
    clickCount += 1;
    document.getElementById("background_click_example").value = clickCount;
};

// Close modal
logicspan.onclick = function() {
    logicmodal.style.display = "none";
    if (modalOpenTime !== null) {
        let duration = (Date.now() - modalOpenTime) / 1000.0;  // seconds
        totalTime += duration;
        document.getElementById("background_time_example").value = totalTime.toFixed(2);
        modalOpenTime = null;
    }
};
</script>
{{ endblock }}